(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00e74942"],{"0137":function(e,t,r){var a=r("ef03"),n=r("7fb7");e.exports=function(e,t,r){var o,s;return n&&"function"==typeof(o=t.constructor)&&o!==r&&a(s=o.prototype)&&s!==r.prototype&&n(e,s),e}},"1aab":function(e,t,r){},"29ba":function(e,t,r){var a=r("10ef");e.exports=Array.isArray||function(e){return"Array"==a(e)}},"71c6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("bread"),r("el-card",{staticClass:"box-card",attrs:{"body-style":{padding:"20px"}}},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.paramsObj.query,callback:function(t){e.$set(e.paramsObj,"query",t)},expression:"paramsObj.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleAdd=!0}}},[e._v("添加用户")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.usersData,border:""}},[r("el-table-column",{attrs:{type:"index",label:"#",width:"50px"}}),r("el-table-column",{attrs:{prop:"username",label:"姓名"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{prop:"mobile",label:"电话"}}),r("el-table-column",{attrs:{prop:"role_name",label:"角色"}}),r("el-table-column",{attrs:{prop:"mg_state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{on:{change:function(r){return e.change(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scoped.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.edit(t.row)}}}),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.del(t.row.id)}}}),r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(r){return e.assignRoles(t.row.id)}}})]}}])})],1),r("el-pagination",{attrs:{"current-page":e.current_page,"page-sizes":[1,2,5,10],"page-size":e.paramsObj.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"添加用户",visible:e.dialogVisibleAdd,width:"50%","before-close":e.handleCloseAdd},on:{"update:visible":function(t){e.dialogVisibleAdd=t}}},[r("el-form",{ref:"addForm",attrs:{model:e.formAdd,rules:e.rules,"label-width":"80px","show-message":!0}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.formAdd.username,callback:function(t){e.$set(e.formAdd,"username",t)},expression:"formAdd.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.formAdd.password,callback:function(t){e.$set(e.formAdd,"password",t)},expression:"formAdd.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.formAdd.email,callback:function(t){e.$set(e.formAdd,"email",t)},expression:"formAdd.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.formAdd.mobile,callback:function(t){e.$set(e.formAdd,"mobile",t)},expression:"formAdd.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisibleAdd=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEnter("addForm")}}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogVisibleEdit,width:"50%","before-close":e.handleCloseEdit},on:{"update:visible":function(t){e.dialogVisibleEdit=t}}},[r("el-form",{ref:"editForm",attrs:{model:e.formEdit,rules:e.rules,"label-width":"80px","show-message":!0}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{value:e.username,disabled:!0}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.formEdit.email,callback:function(t){e.$set(e.formEdit,"email",t)},expression:"formEdit.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.formEdit.mobile,callback:function(t){e.$set(e.formEdit,"mobile",t)},expression:"formEdit.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisibleEdit=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editEnter("editForm")}}},[e._v("确 定")])],1)],1)],1)],1)},n=[],o=r("4833"),s=(r("a573"),r("6a61"),r("e23e")),i=new s["a"],l={data:function(){var e=function(e,t,r){var a=i.Name(t);r(a&&new Error(a))},t=function(e,t,r){var a=i.Password(t);r(a&&new Error(a))},r=function(e,t,r){var a=i.Email(t);r(a&&new Error(a))},a=function(e,t,r){var a=i.Mobile(t);r(a&&new Error(a))};return{dialogVisibleAdd:!1,dialogVisibleEdit:!1,total:0,current_page:1,paramsObj:{query:"",pagenum:1,pagesize:2},formAdd:{username:"",password:"",email:"",mobile:""},formEdit:{email:"",mobile:""},username:"",id:"",usersData:[],rules:{password:[{validator:t,trigger:"blur"}],username:[{validator:e,trigger:"blur"}],email:[{validator:r,trigger:"blur"}],mobile:[{validator:a,trigger:"blur"}]}}},methods:{getUserData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("/users",{params:e.paramsObj});case 2:r=t.sent,200===r.data.meta.status?(e.usersData=r.data.data.users,e.total=r.data.data.total):e.$message={type:"error",message:r.data.meta.msg};case 4:case"end":return t.stop()}}),t)})))()},search:function(){this.getUserData()},handleSizeChange:function(e){this.paramsObj.pagesize=e,this.getUserData()},handleCurrentChange:function(e){this.paramsObj.pagenum=e,this.getUserData()},handleCloseAdd:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){})),this.$refs.addForm.resetFields()},addEnter:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,t.$axios.post("/users",t.formAdd);case 3:a=e.sent,201===a.data.meta.status?(t.getUserData(),t.$message({message:"添加成功",type:"success"})):t.$message({message:"添加失败",type:"error"}),e.next=8;break;case 7:t.$message({message:"输入内容不合规则",type:"error"});case 8:t.dialogVisibleAdd=!1;case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},change:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.put("/users/".concat(e.id,"/state/").concat(e.mg_state));case 2:a=r.sent,200===a.data.meta.status?t.$message({message:"修改用户状态成功",type:"success"}):t.$message({message:"修改用户状态失败",type:"error"});case 4:case"end":return r.stop()}}),r)})))()},handleCloseEdit:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))},edit:function(e){this.formEdit.email=e.email,this.formEdit.mobile=e.mobile,this.username=e.username,this.id=e.id,this.dialogVisibleEdit=!0},editEnter:function(e){var t=this;this.$refs.editForm.validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,t.$axios.put("/users/"+t.id,t.formEdit);case 3:a=e.sent,200===a.data.meta.status?t.$message({message:"修改成功",type:"success"}):t.$message({message:"修改失败",type:"error"}),e.next=8;break;case 7:t.$message({message:"输入内容不合规则",type:"error"});case 8:t.dialogVisibleEdit=!1,t.getUserData();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},del:function(e){var t=this;this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning",center:!0}).then(Object(o["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$axios.delete("/users/"+e);case 2:a=r.sent,200===a.data.meta.status?(t.getUserData(),t.$message({type:"success",message:"删除成功!"})):t.$message({type:"error",message:"删除失败!"});case 4:case"end":return r.stop()}}),r)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},assignRoles:function(e){}},created:function(){this.getUserData()}},c=l,u=(r("99a7"),r("4ac2")),d=Object(u["a"])(c,a,n,!1,null,"116bbd37",null);t["default"]=d.exports},7415:function(e,t,r){var a=r("a299"),n=r("655b"),o=r("c1ad"),s=n("species");e.exports=function(e){return o>=51||!a((function(){var t=[],r=t.constructor={};return r[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"99a7":function(e,t,r){"use strict";r("1aab")},a573:function(e,t,r){"use strict";var a=r("e1de"),n=r("a299"),o=r("29ba"),s=r("ef03"),i=r("67fe"),l=r("512c"),c=r("ea64"),u=r("eacf"),d=r("7415"),f=r("655b"),m=r("c1ad"),p=f("isConcatSpreadable"),g=9007199254740991,b="Maximum allowed index exceeded",h=m>=51||!n((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=d("concat"),w=function(e){if(!s(e))return!1;var t=e[p];return void 0!==t?!!t:o(e)},y=!h||!v;a({target:"Array",proto:!0,forced:y},{concat:function(e){var t,r,a,n,o,s=i(this),d=u(s,0),f=0;for(t=-1,a=arguments.length;t<a;t++)if(o=-1===t?s:arguments[t],w(o)){if(n=l(o.length),f+n>g)throw TypeError(b);for(r=0;r<n;r++,f++)r in o&&c(d,f,o[r])}else{if(f>=g)throw TypeError(b);c(d,f++,o)}return d.length=f,d}})},e23e:function(e,t,r){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}r("eee8"),r("6dbb"),r("ff25");var n=function e(){a(this,e)};Object.assign(n.prototype,{Name:function(e){return e?new RegExp("^[a-zA-Z0-9_一-龥\\s·]+$").test(e)?/(^_)|(__)|(_+$)/.test(e)?"用户名首尾不能出现下划线\t'_'":/^\d+$/.test(e)?"用户名不能全为数字":void 0:"用户名不能有特殊字符":"用户名不能为空"},Mobile:function(e){return e?/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test(e)?void 0:"手机号格式不正确":"手机号不能为空"},Email:function(e){return e?/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(e)?void 0:"邮箱格式不正确":"邮箱不能为空"},Password:function(e){return e?e.length>12||e.length<6?"密码长度应为6~12位":void 0:"密码不能为空"}});t["a"]=n},ea64:function(e,t,r){"use strict";var a=r("875a"),n=r("e4b3"),o=r("8667");e.exports=function(e,t,r){var s=a(t);s in e?n.f(e,s,o(0,r)):e[s]=r}},eacf:function(e,t,r){var a=r("ef03"),n=r("29ba"),o=r("655b"),s=o("species");e.exports=function(e,t){var r;return n(e)&&(r=e.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?a(r)&&(r=r[s],null===r&&(r=void 0)):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},eee8:function(e,t,r){var a=r("0484"),n=r("749e"),o=r("28bf"),s=r("0137"),i=r("e4b3").f,l=r("7855").f,c=r("3aab"),u=r("d411"),d=r("8056"),f=r("d546"),m=r("a299"),p=r("88a3").enforce,g=r("ee60"),b=r("655b"),h=b("match"),v=n.RegExp,w=v.prototype,y=/a/g,x=/a/g,E=new v(y)!==y,$=d.UNSUPPORTED_Y,k=a&&o("RegExp",!E||$||m((function(){return x[h]=!1,v(y)!=y||v(x)==x||"/a/i"!=v(y,"i")})));if(k){var A=function(e,t){var r,a=this instanceof A,n=c(e),o=void 0===t;if(!a&&n&&e.constructor===A&&o)return e;E?n&&!o&&(e=e.source):e instanceof A&&(o&&(t=u.call(e)),e=e.source),$&&(r=!!t&&t.indexOf("y")>-1,r&&(t=t.replace(/y/g,"")));var i=s(E?new v(e,t):v(e,t),a?this:w,A);if($&&r){var l=p(i);l.sticky=!0}return i},_=function(e){e in A||i(A,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},R=l(v),O=0;while(R.length>O)_(R[O++]);w.constructor=A,A.prototype=w,f(n,"RegExp",A)}g("RegExp")},ff25:function(e,t,r){"use strict";var a=r("d546"),n=r("719e"),o=r("a299"),s=r("d411"),i="toString",l=RegExp.prototype,c=l[i],u=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=i;(u||d)&&a(RegExp.prototype,i,(function(){var e=n(this),t=String(e.source),r=e.flags,a=String(void 0===r&&e instanceof RegExp&&!("flags"in l)?s.call(e):r);return"/"+t+"/"+a}),{unsafe:!0})}}]);
//# sourceMappingURL=chunk-00e74942.ed0ba38d.js.map